focus_tree = {
    id = malta_focus
    continuous_focus_position = { x = 300 y = 1650 }

    country = {
        factor = 0

        modifier = {
            add = 1000
            tag = MLT
        }
    }

    # Malta Awakens
    focus = {
        id = MLT_malta_awakens
        x = 15
        y = 1
        prerequisite = {  }
        icon = GFX_focus_malta_awakens
        cost = 4
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_POLITICAL }
        completion_reward = {
            country_event = malta.1
        }
    }

    # The Heart of the Mediterranean Sea
    focus = {
        id = MLT_heart_mediterraenean_sea
        x = 6
        y = 2
        prerequisite = { focus = MLT_malta_awakens }
        icon = GFX_focus_The_Heart_of_the_Mediterranian_Sea
        cost = 4
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_POLITICAL }
        completion_reward = {
            country_event = malta.2
        }
    }

    # The Industry in Valletta
    focus = {
        id = MLT_industry_in_valleta
        x = 3
        y = 3
        prerequisite = { focus = MLT_heart_mediterraenean_sea }
        icon = GFX_focus_The_Industry_in_Valletta
        cost = 4
        ai_will_do = {
            factor = 5
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_INDUSTRY }
        completion_reward = {
            116 = {
                add_extra_state_shared_building_slots = 2
                add_building_construction = {
                    type = industrial_complex
                    level = 1
                    instant_build = yes
                }
                add_building_construction = {
                    type = arms_factory
                    level = 1
                    instant_build = yes
                }
            }
        }
    }

    # Maltese Railways
    focus = {
        id = MLT_maltese_railways
        x = 6
        y = 3
        prerequisite = { focus = MLT_heart_mediterraenean_sea }
        icon = GFX_focus_Maltese_Railways
        cost = 4
        ai_will_do = {
            factor = 5
        }
        bypass = {
            116 = {
                infrastructure > 9
            }
        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_INDUSTRY }
        completion_reward = {
            116 = {
                add_building_construction = {
                    type = infrastructure
                    level = 2
                    instant_build = yes
                }
            }
        }
    }

    # Maltese Shipbuilding
    focus = {
        id = MLT_maltese_shipbuilding
        x = 9
        y = 3
        prerequisite = { focus = MLT_heart_mediterraenean_sea }
        icon = GFX_focus_Maltese_Shipbuilding
        cost = 4
        ai_will_do = {
            factor = 5
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_INDUSTRY }
        completion_reward = {
            116 = {
                add_extra_state_shared_building_slots = 1
                add_building_construction = {
                    type = dockyard
                    level = 1
                    instant_build = yes
                }
            }
        }
    }

    # Eradicate Unemployment
    focus = {
        id = MLT_eradicate_unemployment
        x = 3
        y = 4
        prerequisite = { focus = MLT_industry_in_valleta }
        icon = GFX_focus_Eradicate_Unemployment
        cost = 5
        ai_will_do = {
            factor = 5
        }
        bypass = {

        }
        available = {
            
        }
        search_filters = { FOCUS_FILTER_INDUSTRY }
        completion_reward = {
            add_ideas = MLT_Eradicate_unemployment
        }
    }

    # Speech for the Workers
    focus = {
        id = MLT_speech_workers
        x = 6
        y = 4
        prerequisite = { focus = MLT_maltese_railways }
        icon = GFX_focus_Speech_for_the_Workers
        cost = 5
        ai_will_do = {
            factor = 5
        }
        bypass = {

        }
        available = {
            
        }
        search_filters = { FOCUS_FILTER_INDUSTRY }
        completion_reward = {
            country_event = malta.3
        }
    }

    # Fishing Industry
    focus = {
        id = MLT_fishing_industry
        x = 9
        y = 4
        prerequisite = { focus = MLT_maltese_shipbuilding }
        icon = GFX_focus_Fishing_Industry
        cost = 5
        ai_will_do = {
            factor = 5
        }
        bypass = {

        }
        available = {

        }
        search_filters = { FOCUS_FILTER_INDUSTRY }
        completion_reward = {
            add_equipment_to_stockpile = {
                type = convoy
                amount = 50
                producer = MLT
            }
            add_ideas = MLT_Fishing_industry
        }
    }

    # Under the Maltese Flag
    focus = {
        id = MLT_under_maltese_flag
        x = 6
        y = 5
        prerequisite = { focus = MLT_eradicate_unemployment }
        prerequisite = { focus = MLT_speech_workers }
        prerequisite = { focus = MLT_fishing_industry }
        icon = GFX_focus_Under_the_Maltese_Flag
        cost = 8
        ai_will_do = {
            factor = 5
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_MILITARY_MALTA }
        completion_reward = {
            add_ideas = MLT_Under_maltese_flag
        }
    }

    # The Political Turmoil
    focus = {
        id = MLT_political_turmoil
        x = 25
        y = 2
        prerequisite = { focus = MLT_malta_awakens }
        icon = GFX_focus_Political_Turmoil
        cost = 3
        ai_will_do = {
            factor = 20
        }
        bypass = {

        }
        available = {
            
        }
        search_filters = { FOCUS_FILTER_POLITICAL }
        completion_reward = {
            country_event = malta.30
        }
    }

    # The Maltese Language Question
    focus = {
        id = MLT_maltese_language_question
        x = 25
        y = 3
        prerequisite = { focus = MLT_political_turmoil }
        icon = GFX_focus_The_Maltese_Language_Question
        cost = 4
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {

        }
        search_filters = { FOCUS_FILTER_POLITICAL }
        completion_reward = {
            country_event = malta.31
        }
    }

    # The 1936 Elections
    focus = {
        id = MLT_maltese_election
        x = 25
        y = 4
        prerequisite = { focus = MLT_maltese_language_question }
        icon = GFX_focus_The_1936_Elections
        cost = 5
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {

        }
        search_filters = { FOCUS_FILTER_POLITICAL }
        completion_reward = {
            country_event = malta.32
            if = {
                limit = {
                    date < 1937.01.01
                }
                custom_effect_tooltip = MLT_maltese_election_before_37
            }
            else = {
                if = {
                    limit = {
                        NOT = {
                            has_completed_focus = MLT_maltese_election
                        }
                    }
                    add_stability = -0.10
                    custom_effect_tooltip = MLT_maltese_election_after_37
                }
            }
        }
    }

    # Constitutional Party
    focus = {
        id = MLT_constitutional_party
        x = 20
        y = 5
        prerequisite = { focus = MLT_maltese_election }
        icon = GFX_focus_Constitutional_Party
        cost = 4
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
			has_government = democratic
        }
        search_filters = { FOCUS_FILTER_POLITICAL }
        completion_reward = {
            add_ideas = MLT_Constitutional_party_ideas
        }
    }

    # The Labour Party
    focus = {
        id = MLT_labour_party
        x = 23
        y = 5
        prerequisite = { focus = MLT_maltese_election }
        icon = GFX_focus_The_Labour_Party
        cost = 4
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
			has_government = communism
        }
        search_filters = { FOCUS_FILTER_POLITICAL }
        completion_reward = {
            add_ideas = MLT_Labour_party_ideas
        }
    }

    # The Nationalist Party
    focus = {
        id = MLT_nationalist_party
        x = 27
        y = 5
        prerequisite = { focus = MLT_maltese_election }
        icon = GFX_focus_Nationalist_Party
        cost = 4
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
			has_government = fascism
        }
        search_filters = { FOCUS_FILTER_POLITICAL }
        completion_reward = {
            add_ideas = MLT_Nationalist_party_ideas
        }
    }

    # Independents Party
    focus = {
        id = MLT_independent_party
        x = 30
        y = 5
        prerequisite = { focus = MLT_maltese_election }
        icon = GFX_focus_Independents_Party
        cost = 4
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
			has_government = neutrality
        }
        search_filters = { FOCUS_FILTER_POLITICAL }
        completion_reward = {
            add_ideas = MLT_Independents_party_ideas
        }
    }

    # The British Pounds
    focus = {
        id = MLT_british_pounds
        x = 23
        y = 6
        prerequisite = { focus = MLT_constitutional_party focus = MLT_labour_party focus = MLT_nationalist_party }
        mutually_exclusive = { focus = MLT_maltese_lira }
        icon = GFX_focus_The_British_Pounds
        cost = 8
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {

        }
        search_filters = { FOCUS_FILTER_POLITICAL }
        completion_reward = {
			add_ideas = MLT_british_pounds_ideas
        }
    }

    # The Maltese Lira
    focus = {
        id = MLT_maltese_lira
        x = 27
        y = 6
        prerequisite = { focus = MLT_labour_party focus = MLT_nationalist_party focus = MLT_independent_party }
        mutually_exclusive = { focus = MLT_british_pounds }
        icon = GFX_focus_The_Maltese_Lira
        cost = 8
        ai_will_do = {
            factor = 10
            modifier = {
                has_country_flag = MLT_historical_run
                factor = 0
            }
        }
        bypass = {

        }
        available = {

        }
        search_filters = { FOCUS_FILTER_POLITICAL }
        completion_reward = {
			add_ideas = MLT_maltese_lira_ideas
        }
    }

    # The Maltese Strategy
    focus = {
        id = MLT_maltese_strategy
        x = 15
        y = 2
        prerequisite = { focus = MLT_malta_awakens }
        icon = GFX_focus_maltese_strategy_beginning
        cost = 3
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            country_event = malta.4
        }
    }

    # Study St Elmo Bridge
    focus = {
        id = MLT_study_stelmo_bridge
        x = 15
        y = 3
        prerequisite = { focus = MLT_maltese_strategy }
        icon = GFX_focus_study_landmarks_malta
        cost = 3
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            country_event = malta.5
        }
    }

    # Study the Azure Window
    focus = {
        id = MLT_study_azure_window
        x = 13
        y = 4
        prerequisite = { focus = MLT_study_stelmo_bridge }
        icon = GFX_focus_study_landmarks_malta
        cost = 3
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            country_event = malta.6
        }
    }

    # Study the Dingli Cliffs
    focus = {
        id = MLT_study_dingli_cliffs
        x = 17
        y = 4
        prerequisite = { focus = MLT_study_stelmo_bridge }
        icon = GFX_focus_study_landmarks_malta
        cost = 3
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            country_event = malta.7
        }
    }

    # Adopt a new Strategy
    focus = {
        id = MLT_adopt_new_strategy
        x = 15
        y = 5
        prerequisite = { focus = MLT_study_azure_window }
        prerequisite = { focus = MLT_study_dingli_cliffs }
        icon = GFX_focus_adopt_new_strategy
        cost = 5
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            country_event = malta.8
        }
    }

    # The First Floor
    focus = {
        id = MLT_first_floor
        x = 15
        y = 6
        prerequisite = { focus = MLT_adopt_new_strategy }
        icon = GFX_focus_tower_first_floor
        cost = 6
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            country_event = malta.9
        }
    }

    # The Second Floor
    focus = {
        id = MLT_second_floor
        x = 15
        y = 7
        prerequisite = { focus = MLT_first_floor }
        icon = GFX_focus_tower_second_floor
        cost = 6
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
            custom_trigger_tooltip = {
                tooltip = MLT_second_floor_trigger_tt
                check_variable = {
                    var = current_tower_floor
                    value = 1
                    compare = greater_than_or_equals
                }
            }
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            country_event = malta.10
        }
    }

    # Mediterranean Bastion
    focus = {
        id = MLT_mediterranean_bastion
        x = 6
        y = 7
        prerequisite = { focus = MLT_first_floor }
        icon = GFX_focus_Mediterranean_bastion
        cost = 4
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
            has_completed_focus = MLT_colonial_question
        }
        search_filters = { FOCUS_FILTER_MILITARY_MALTA }
        completion_reward = {
	        country_event = malta.29
        }
    }

    # Floating Fortress
    focus = {
        id = MLT_floating_fortress
        x = 4
        y = 8
        prerequisite = { focus = MLT_mediterranean_bastion }
        icon = GFX_goal_generic_construct_military
        cost = 4
        ai_will_do = {
            factor = 2
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_MILITARY_MALTA }
        completion_reward = {
            air_experience = 25
            116 = {
                add_building_construction = {
                    type = bunker
                    level = 7
                    instant_build = yes
                    province = 12003
                }
            }
        }
    }

    # Air Denial
    focus = {
        id = MLT_air_denial
        x = 4
        y = 9
        prerequisite = { focus = MLT_floating_fortress }
        icon = GFX_goal_generic_radar
        cost = 4
        ai_will_do = {
            factor = 2
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_MILITARY_MALTA }
        completion_reward = {
            air_experience = 25
            116 = {
                add_building_construction = {
                    type = anti_air_building
                    level = 4
                    instant_build = yes
                }
            }
        }
    }

    # The Shores of Malta...
    focus = {
        id = MLT_shores_of_malta
        x = 8
        y = 8
        prerequisite = { focus = MLT_mediterranean_bastion }
        icon = GFX_focus_generic_coastal_fort
        cost = 4
        ai_will_do = {
            factor = 2
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_MILITARY_MALTA }
        completion_reward = {
            navy_experience = 25
            116 = {
                add_building_construction  = {
                    type = coastal_bunker
                    level = 4
                    instant_build = yes
                    province = 12003
                }
            }
        }
    }

    # Where None Shall Land
    focus = {
        id = MLT_where_none_shall_land
        x = 8
        y = 9
        prerequisite = { focus = MLT_shores_of_malta }
        icon = GFX_goal_generic_military_sphere
        cost = 4
        ai_will_do = {
            factor = 2
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_MILITARY_MALTA }
        completion_reward = {
            navy_experience = 25
            116 = {
                add_building_construction = {
                    type = coastal_bunker
                    level = 4
                    instant_build = yes
                    province = 12003
                }
                add_building_construction = {
                    type = naval_base
                    level = 6
                    instant_build = yes
                    province = 12003
                }
            }
        }
    }

    # Counteroffensive Tactics
    focus = {
        id = MLT_counteroffensive_tactics
        x = 6
        y = 10
        prerequisite = { focus = MLT_air_denial focus = MLT_where_none_shall_land }
        icon = GFX_focus_generic_provoke_border_clashes
        cost = 6
        ai_will_do = {
            factor = 2
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_MILITARY_MALTA }
        completion_reward = {
            army_experience = 50
            add_tech_bonus = {
				name = MAL_counteroffensive_military_tact
				bonus = 1
				uses = 2
				category = land_doctrine
			}
        }
    }

    # The Janitor
    focus = {
        id = MLT_the_janitor
        x = 6
        y = 11
        prerequisite = { focus = MLT_counteroffensive_tactics }
        icon = GFX_focus_the_janitor_malta
        cost = 8
        ai_will_do = {
            factor = 2
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
            custom_trigger_tooltip = {
                tooltip = MLT_second_floor_trigger_tt
                check_variable = {
                    var = current_tower_floor
                    value = 1
                    compare = greater_than_or_equals
                }
            }
        }
        search_filters = { FOCUS_FILTER_MILITARY_MALTA }
        completion_reward = {
            add_political_power = -100
            create_field_marshal = {
                name = "The Janitor"
                picture = "Portrait_janitor_tower.dds"
                traits = { MLT_janitor naval_invader urban_assault_specialist hill_fighter organizer trait_engineer skilled_staffer }
                skill = 5
                attack_skill = 2
                defense_skill = 3
                planning_skill = 4
                logistics_skill = 5
            }
        }
    }

    # The Colonial Question
    focus = {
        id = MLT_colonial_question
        x = 25
        y = 7
        prerequisite = { focus = MLT_first_floor }
        icon = GFX_focus_eng_decolonization
        cost = 6
        ai_will_do = {
            factor = 15
        }
        bypass = {
            MLT = {
                NOT = {
                    is_subject_of = ENG
                }
            }
        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_INDEPENDENCE_MALTA }
        completion_reward = {
            country_event = { id = malta.41 }
            remove_ideas = MLT_Independence_movements
        }
    }

    # A Free Malta
    focus = {
        id = MLT_free_malta
        x = 21
        y = 8
        prerequisite = { focus = MLT_colonial_question }
	    mutually_exclusive = { focus = MLT_loayal_malta }
        icon = GFX_focus_eng_move_to_secure_the_dominions
        cost = 4
        ai_will_do = {
            factor = 10
        }
        bypass = {
            MLT = {
                NOT = {
                    is_subject_of = ENG
                }
            }
        }
        available = {
            MLT = {
                compare_autonomy_progress_ratio > 0.70
            }
            NOT = {
                has_idea = MLT_Loyalty_to_britain
            }
        }
        search_filters = { FOCUS_FILTER_INDEPENDENCE_MALTA }
        completion_reward = {
            ENG = {
                set_autonomy = {
                    target = MLT
                    autonomy_state = autonomy_free
                }
            }
        }
    }

    # Keep British Ties
    focus = {
        id = MLT_keep_british_ties
        x = 19
        y = 9
        prerequisite = { focus = MLT_free_malta }
	    mutually_exclusive = { focus = MLT_seek_new_friendships }
        icon = GFX_focus_chi_british_cooperation
        cost = 4
        ai_will_do = {
            factor = 10
            modifier = {
                has_country_flag = MLT_historical_run
                factor = 25
            }
        }
        bypass = {

        }
        available = {
            is_in_faction_with = ENG
            ENG = {
                has_government = ROOT
            }
        }
        search_filters = { FOCUS_FILTER_INDEPENDENCE_MALTA }
        completion_reward = {
            add_political_power = -100
            116 = {
                add_extra_state_shared_building_slots = 6
                add_building_construction = {
                    type = arms_factory
                    level = 2
                    instant_build = yes
                }
                add_building_construction = {
                    type = industrial_complex
                    level = 2
                    instant_build = yes
                }
                add_building_construction = {
                    type = dockyard
                    level = 2
                    instant_build = yes
                }
            }
            MLT = {
                add_tech_bonus = {
                    name = MLT_british_ties_tech
                    bonus = 1
                    uses = 2
                    category = naval_doctrine
                }
            }
        }
    }

    # Old Friends are Still Friends
    focus = {
        id = MLT_old_friends_still_friends
        x = 19
        y = 10
        prerequisite = { focus = MLT_keep_british_ties }
        icon = GFX_focus_old_friend_still_friends
        cost = 5
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            is_in_faction_with = ENG
            ENG = {
                has_government = ROOT
            }
        }
        search_filters = { FOCUS_FILTER_INDEPENDENCE_MALTA }
        completion_reward = {
            custom_effect_tooltip = national_spirits_go_away_if_not_faction_with_eng
            add_ideas = MLT_British_navy_help
        }
    }

    # Seek New Friendships
    focus = {
        id = MLT_seek_new_friendships
        x = 23
        y = 9
        prerequisite = { focus = MLT_free_malta }
	    mutually_exclusive = { focus = MLT_keep_british_ties }
        icon = GFX_focus_seek_new_friendship
        cost = 4
        ai_will_do = {
            factor = 10
        }
        bypass = {
            NOT = {
                is_in_faction_with = ENG
            }
        }
        available = {
            NOT = {
                has_capitulated = yes
            }
        }
        search_filters = { FOCUS_FILTER_INDEPENDENCE_MALTA }
        completion_reward = {
            if = {
                limit = {
                    MLT = {
                        is_in_faction_with = ENG
                    }
                }
                ENG = {
                    remove_from_faction = MLT
                }
            }
            add_political_power = 150
            add_war_support = 0.2
            ENG = {
                add_opinion_modifier = {
                    target = MLT
                    modifier = backstabber_british
                }
                add_ai_strategy = {
                    type = alliance
                    id = MLT
                    value = -50
                }
            }
        }
    }

    # Picking a Side
    focus = {
        id = MLT_picking_a_side
        x = 23
        y = 10
        prerequisite = { focus = MLT_seek_new_friendships }
        icon = GFX_focus_picking_side
        cost = 5
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            NOT = {
                has_capitulated = yes
            }
        }
        search_filters = { FOCUS_FILTER_INDEPENDENCE_MALTA }
        completion_reward = {
            add_ideas = MLT_New_friendships
            country_event = { id = malta.42 }
        }
    }

    # A Loyal Malta
    focus = {
        id = MLT_loayal_malta
        x = 29
        y = 8
        prerequisite = { focus = MLT_colonial_question }
	    mutually_exclusive = { focus = MLT_free_malta }
        icon = GFX_focus_loyal_towards_britain_malta
        cost = 4
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_idea = MLT_Loyalty_to_britain
            OR = {
                is_subject_of = ENG
                is_in_faction_with = ENG
            }
        }
        search_filters = { FOCUS_FILTER_INDEPENDENCE_MALTA }
        completion_reward = {
            swap_ideas = {
                remove_idea = MLT_Loyalty_to_britain
                add_idea = MLT_Loyalty_to_britain_2
            }
        }
    }

    # Share Secrets of the Tower
    focus = {
        id = MLT_share_secrets_town
        x = 29
        y = 9
        prerequisite = { focus = MLT_loayal_malta }
        icon = GFX_focus_share_tower_secrets
        cost = 4
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            NOT = {
                ENG = {
                    has_capitulated = yes
                }
                has_capitulated = yes
            }
        }
        search_filters = { FOCUS_FILTER_INDEPENDENCE_MALTA }
        completion_reward = {
            swap_ideas = {
                remove_idea = MLT_Loyalty_to_britain_2
                add_idea = MLT_Loyalty_to_britain_3
            }
            ENG = {
                add_ideas = MLT_Secrets_of_tower
            }
        }
    }

    # Mutual Aid
    focus = {
        id = MLT_mutual_aid
        x = 29
        y = 10
        prerequisite = { focus = MLT_share_secrets_town }
        icon = GFX_focus_mutual_aid_malta
        cost = 6
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            NOT = {
                has_capitulated = yes
                ENG = {
                    has_capitulated = yes
                }
            }
        }
        search_filters = { FOCUS_FILTER_INDEPENDENCE_MALTA }
        completion_reward = {
            swap_ideas = {
                remove_idea = MLT_Loyalty_to_britain_3
                add_idea = MLT_Loyalty_to_britain_4
            }
            ENG = {
                swap_ideas = {
                    remove_idea = MLT_Secrets_of_tower
                    add_idea = MLT_Secrets_of_tower_2
                }
            }
            116 = {
                add_extra_state_shared_building_slots = 9
                add_building_construction = {
                    type = industrial_complex
                    level = 3
                    instant_build = yes
                }
                add_building_construction = {
                    type = arms_factory
                    level = 3
                    instant_build = yes
                }
                add_building_construction = {
                    type = dockyard
                    level = 3
                    instant_build = yes
                }
            }
        }
    }

    # The Third Floor
    focus = {
        id = MLT_third_floor
        x = 15
        y = 8
        prerequisite = { focus = MLT_second_floor }
        icon = GFX_focus_tower_third_floor
        cost = 6
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
            custom_trigger_tooltip = {
                tooltip = MLT_third_floor_trigger_tt
                check_variable = {
                    var = current_tower_floor
                    value = 2
                    compare = greater_than_or_equals
                }
            }
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            country_event = malta.11
        }
    }

    # The Tenth Floor
    focus = {
        id = MLT_tenth_floor
        x = 15
        y = 9
        prerequisite = { focus = MLT_third_floor }
        icon = GFX_focus_tower_tenth_floor
        cost = 6
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
            custom_trigger_tooltip = {
                tooltip = MLT_tenth_floor_trigger_tt
                check_variable = {
                    var = current_tower_floor
                    value = 3
                    compare = greater_than_or_equals
                }
            }
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            country_event = malta.13
            if = {
                limit = {
                    has_dlc = "La Resistance"
                    has_intelligence_agency = no
                }
                create_intelligence_agency = yes
            }
        }
    }

    # Attract Investors in the Tower
    focus = {
        id = MLT_attract_investors_tower
        x = 15
        y = 10
        prerequisite = { focus = MLT_tenth_floor }
        icon = GFX_focus_attract_investors
        cost = 7
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
            custom_trigger_tooltip = {
                tooltip = MLT_attract_investors_tower_trigger_tt
                check_variable = {
                    var = current_tower_floor
                    value = 10
                    compare = greater_than_or_equals
                }
            }
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            country_event = malta.12
        }
    }

    # Send Someone On a Journey
    focus = {
        id = MLT_send_someone_journey
        x = 15
        y = 11
        prerequisite = { focus = MLT_attract_investors_tower }
        icon = GFX_focus_the_journey_malta
        cost = 4
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            country_event = malta.14
            set_country_flag = leader_malta_is_on_journey
        }
    }

    # Improve the Economy...
    focus = {
        id = MLT_improve_economy_tower
        x = 15
        y = 12
        prerequisite = { focus = MLT_send_someone_journey }
        icon = GFX_focus_fix_economy_malta
        cost = 2
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
            NOT = {
                has_idea = MLT_Political_crisis
                has_country_flag = leader_malta_is_on_journey
            }
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            country_event = malta.15
        }
    }

    # With Coastal Raids
    focus = {
        id = MLT_with_coastal_raids
        x = 12
        y = 13
        prerequisite = { focus = MLT_improve_economy_tower }
        icon = GFX_focus_coastal_raids_malta
        cost = 3
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            custom_effect_tooltip = MLT_with_coastal_raids_tt
        }
    }

    # With Fishing Boats
    focus = {
        id = MLT_with_fishing_boats
        x = 15
        y = 13
        prerequisite = { focus = MLT_improve_economy_tower }
        icon = GFX_focus_fishing_boats_malta
        cost = 3
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            custom_effect_tooltip = MLT_with_fishing_boats_tt
        }
    }

    # With Privateering
    focus = {
        id = MLT_with_piratry
        x = 18
        y = 13
        prerequisite = { focus = MLT_improve_economy_tower }
        icon = GFX_focus_with_privateering_malta
        cost = 3
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            custom_effect_tooltip = MLT_with_piratry_tt
        }
    }

    # You're in Maltese Water, Thus it is Legal
    focus = {
        id = MLT_maltese_water_thus_legal
        x = 15
        y = 14
        prerequisite = { focus = MLT_with_coastal_raids focus = MLT_with_fishing_boats focus = MLT_with_piratry }
        icon = GFX_focus_maltese_water_is_legal
        cost = 5
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            country_event = malta.16
            hidden_effect = {
                news_event = { id = newsmalta.8 days = 1 }
            }
        }
    }

    # The Fiftieth Floor
    focus = {
        id = MLT_fiftieth_floor
        x = 15
        y = 15
        prerequisite = { focus = MLT_maltese_water_thus_legal }
        icon = GFX_focus_tower_fiftieth_floor
        cost = 6
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
            has_completed_focus = MLT_colonial_question
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            custom_effect_tooltip = MLT_fiftieth_floor_tt
            set_variable = { max_tower_floor = 50 }
        }
    }

    # Land, Air and Sea
    focus = {
        id = MLT_land_air_and_sea
        x = 6
        y = 16
        prerequisite = { focus = MLT_fiftieth_floor }
        icon = GFX_focus_generic_license_production
        cost = 10
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_MILITARY_MALTA }
        completion_reward = {
            add_research_slot = 1

            add_tech_bonus = {
				name = MLT_land_air_and_sea_tech
				bonus = 0.5
				uses = 1
				category = land_doctrine
			}

			add_tech_bonus = {
				name = MLT_land_air_and_sea_tech
				bonus = 0.5
				uses = 1
				category = air_doctrine
			}

            add_tech_bonus = {
				name = MLT_land_air_and_sea_tech
				bonus = 0.5
				uses = 1
				category = naval_doctrine
			}
            army_experience = 25
            air_experience = 25
            navy_experience = 25
        }
    }

    # Maltese Elite Mountaineers
    focus = {
        id = MLT_maltese_elite_mountaineers
        x = 3
        y = 17
        prerequisite = { focus = MLT_land_air_and_sea }
	    mutually_exclusive = { focus = MLT_maltese_elite_paratroopers }
	    mutually_exclusive = { focus = MLT_maltese_elite_marines }
        icon = GFX_goal_generic_special_forces
        cost = 6
        ai_will_do = {
            factor = 2
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_MILITARY_MALTA }
        completion_reward = {
            set_technology = {
                tech_mountaineers = 1
            }
            MLT = {
                division_template = {
                    name = "Mountaineers Squadron of the Armed Forces of Malta"
                    priority = 2
                    regiments = {
                        mountaineers = { x = 0 y = 0 }	
                        mountaineers = { x = 0 y = 1 }
                        mountaineers = { x = 0 y = 2 }	
                        mountaineers = { x = 1 y = 0 }
                        mountaineers = { x = 1 y = 1 }
                        mountaineers = { x = 1 y = 2 }
                        mountaineers = { x = 2 y = 0 }	
                        mountaineers = { x = 2 y = 1 }	
                        mountaineers = { x = 2 y = 2 }	
                        mountaineers = { x = 3 y = 0 }	
                        mountaineers = { x = 3 y = 1 }	
                        mountaineers = { x = 3 y = 2 }	
                    }
                    support = {
                        engineer = { x = 0 y = 0 }
                        artillery = { x = 0 y = 1 }
                    }
                }
            }
            116 = {
                create_unit = {
                    division = "name = \"Mountaineers Squadron of the Armed Forces of Malta\" division_template = \"Mountaineers Squadron of the Armed Forces of Malta\" start_experience_factor = 1 start_equipment_factor = 1"
                    owner = MLT
                }
            }
        }
    }

    # Maltese Elite Paratroopers
    focus = {
        id = MLT_maltese_elite_paratroopers
        x = 6
        y = 17
        prerequisite = { focus = MLT_land_air_and_sea }
	    mutually_exclusive = { focus = MLT_maltese_elite_mountaineers }
	    mutually_exclusive = { focus = MLT_maltese_elite_marines }
        icon = GFX_focus_generic_paratrooper
        cost = 6
        ai_will_do = {
            factor = 2
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_MILITARY_MALTA }
        completion_reward = {
            set_technology = {
                paratroopers = 1
            }
            MLT = {
                division_template = {
                    name = "Armed Forces of Malta Air Wing"
                    priority = 2
                    regiments = {
                        paratrooper = { x = 0 y = 0 }	
                        paratrooper = { x = 0 y = 1 }
                        paratrooper = { x = 0 y = 2 }	
                        paratrooper = { x = 1 y = 0 }
                        paratrooper = { x = 1 y = 1 }
                        paratrooper = { x = 1 y = 2 }
                        paratrooper = { x = 2 y = 0 }	
                        paratrooper = { x = 2 y = 1 }	
                        paratrooper = { x = 2 y = 2 }	
                        paratrooper = { x = 3 y = 0 }	
                        paratrooper = { x = 3 y = 1 }	
                        paratrooper = { x = 3 y = 2 }	
                    }
                    support = {
                        engineer = { x = 0 y = 0 }
                        artillery = { x = 0 y = 1 }
                    }
                }
            }
            116 = {
                create_unit = {
                    division = "name = \"Armed Forces of Malta Air Wing\" division_template = \"Armed Forces of Malta Air Wing\" start_experience_factor = 1 start_equipment_factor = 1"
                    owner = MLT
                }
            }
        }
    }

    # Maltese Elite Marines
    focus = {
        id = MLT_maltese_elite_marines
        x = 9
        y = 17
        prerequisite = { focus = MLT_land_air_and_sea }
	    mutually_exclusive = { focus = MLT_maltese_elite_mountaineers }
	    mutually_exclusive = { focus = MLT_maltese_elite_paratroopers }
        icon = GFX_goal_generic_amphibious_assault
        cost = 6
        ai_will_do = {
            factor = 2
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_MILITARY_MALTA }
        completion_reward = {
            set_technology = {
                marines = 1
            }
            MLT = {
                division_template = {
                    name = "Maritime Squadron of the Armed Forces of Malta"
                    priority = 2
                    regiments = {
                        marine = { x = 0 y = 0 }	
                        marine = { x = 0 y = 1 }
                        marine = { x = 0 y = 2 }	
                        marine = { x = 1 y = 0 }
                        marine = { x = 1 y = 1 }
                        marine = { x = 1 y = 2 }
                        marine = { x = 2 y = 0 }	
                        marine = { x = 2 y = 1 }	
                        marine = { x = 2 y = 2 }	
                        marine = { x = 3 y = 0 }	
                        marine = { x = 3 y = 1 }	
                        marine = { x = 3 y = 2 }	
                    }
                    support = {
                        engineer = { x = 0 y = 0 }
                        artillery = { x = 0 y = 1 }
                    }
                }
            }
            116 = {
                create_unit = {
                    division = "name = \"Maritime Squadron of the Armed Forces of Malta\" division_template = \"Maritime Squadron of the Armed Forces of Malta\" start_experience_factor = 1 start_equipment_factor = 1"
                    owner = MLT
                }
            }
        }
    }

    # Protectors of the Tower...
    focus = {
        id = MLT_protectors_of_the_towers
        x = 6
        y = 18
        prerequisite = { focus = MLT_maltese_elite_mountaineers focus = MLT_maltese_elite_paratroopers focus = MLT_maltese_elite_marines }
        icon = GFX_focus_tower_protector_defence
        cost = 4
        ai_will_do = {
            factor = 2
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_MILITARY_MALTA }
        completion_reward = {
            add_tech_bonus = {
				name = MLT_protectors_of_tower_tech
				bonus = 1
				uses = 1
				category = para_tech 
			}
            add_tech_bonus = {
				name = MLT_protectors_of_tower_tech
				bonus = 1
				uses = 1
				category = mountaineers_tech 
			}
            add_tech_bonus = {
				name = MLT_protectors_of_tower_tech
				bonus = 1
				uses = 1
				category = marine_tech 
			}
        }
    }

    # On the Shores!
    focus = {
        id = MLT_on_the_shores
        x = 3
        y = 19
        prerequisite = { focus = MLT_protectors_of_the_towers }
        icon = GFX_goal_generic_allies_build_infantry
        cost = 6
        ai_will_do = {
            factor = 2
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_MILITARY_MALTA }
        completion_reward = {
            army_experience = 25
            add_tech_bonus = {
				name = MLT_on_the_shores_tech
				bonus = 1
				uses = 2
				category = infantry_weapons
			}
            add_tech_bonus = {
				name = MLT_on_the_shores_tech
				bonus = 1
				uses = 2
				category = cat_light_armor
			}
            add_tech_bonus = {
				name = MLT_on_the_shores_tech
				bonus = 1
				uses = 2
				category = support_tech
			}
        }
    }

    # On Waters!
    focus = {
        id = MLT_on_the_water
        x = 6
        y = 19
        prerequisite = { focus = MLT_protectors_of_the_towers }
        icon = GFX_goal_generic_navy_battleship
        cost = 6
        ai_will_do = {
            factor = 2
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_MILITARY_MALTA }
        completion_reward = {
            navy_experience = 25
            add_tech_bonus = {
				name = MLT_on_the_water_tech
				bonus = 1
				uses = 2
				category = ss_tech
			}
            add_tech_bonus = {
				name = MLT_on_the_water_tech
				bonus = 1
				uses = 2
				category = bb_tech
			}
            add_tech_bonus = {
				name = MLT_on_the_water_tech
				bonus = 1
				uses = 2
				category = dd_tech
			}
        }
    }

    # in the Air!
    focus = {
        id = MLT_in_the_air
        x = 9
        y = 19
        prerequisite = { focus = MLT_protectors_of_the_towers }
        icon = GFX_goal_generic_air_fighter
        cost = 6
        ai_will_do = {
            factor = 2
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_MILITARY_MALTA }
        completion_reward = {
            air_experience = 25
            add_tech_bonus = {
				name = MLT_in_the_air_tech
				bonus = 1
				uses = 2
				category = cas_bomber
			}
            add_tech_bonus = {
				name = MLT_in_the_air_tech
				bonus = 1
				uses = 2
				category = light_fighter
			}
            add_tech_bonus = {
				name = MLT_in_the_air_tech
				bonus = 1
				uses = 2
				category = tactical_bomber
			}
        }
    }

    # Foreign Politics
    focus = {
        id = MLT_foreign_politics
        x = 25
        y = 16
        prerequisite = { focus = MLT_fiftieth_floor }
        icon = GFX_focus_generic_diplomatic_treaty
        cost = 4
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            is_subject = no
            has_completed_focus = MLT_colonial_question
            NOT = {
                has_country_flag = MLT_stay_loyal_towards_britain
            }
        }
        search_filters = { FOCUS_FILTER_POLITICAL }
        completion_reward = {
            add_political_power = 100
        }
    }

    # Approach Italy
    focus = {
        id = MLT_approach_italy
        x = 22
        y = 17
        prerequisite = { focus = MLT_foreign_politics }
        icon = GFX_focus_befriend_italy
        cost = 4
        ai_will_do = {
            factor = 10
            modifier = {
                has_country_flag = MLT_historical_run
                factor = 0
            }
        }
        bypass = {
            OR = {
                NOT = {
                    ITA = {
                        OR = {
                            has_government = fascism
                            has_government = neutrality
                        }
                    }
                    MLT = {
                        OR = {
                            has_government = fascism
                            has_government = neutrality
                        }
                    }
                }
                is_in_faction_with = ITA
            }
        }
        available = {
            country_exists = ITA
            NOT = {
                ITA = {
                    is_subject = yes
                }
            }
            OR = {
                is_in_faction = no
                is_faction_leader = yes
            }
            ITA = {
                OR = {
                    has_government = fascism
                    has_government = neutrality
                }
            }
            OR = {
                has_government = neutrality
                has_government = fascism
            }
        }
        search_filters = { FOCUS_FILTER_POLITICAL }
        completion_reward = {
            ITA = {
                country_event = {id = malta.33 days = 1 }
            }
        }
    }

    # Approach France
    focus = {
        id = MLT_approach_france
        x = 25
        y = 17
        prerequisite = { focus = MLT_foreign_politics }
        icon = GFX_focus_chi_reach_out_to_france
        cost = 4
        ai_will_do = {
            factor = 10
            modifier = {
                has_country_flag = MLT_historical_run
                factor = 0
            }
        }
        bypass = {
            OR = {
                NOT = {
                    FRA = {
                        has_government = democratic
                    }
                    MLT = {
                        has_government = democratic
                    }
                }
                is_in_faction_with = FRA
            }
        }
        available = {
            country_exists = FRA
            NOT = {
                FRA = {
                    is_subject = yes
                }
            }
            OR = {
                is_in_faction = no
                is_faction_leader = yes
            }
            has_government = democratic
            FRA = {
                has_government = democratic
            }
        }
        search_filters = { FOCUS_FILTER_POLITICAL }
        completion_reward = {
            FRA = {
                country_event = {id = malta.33 days = 1 }
            }
        }
    }

    # Approach Germany
    focus = {
        id = MLT_approach_germany
        x = 28
        y = 17
        prerequisite = { focus = MLT_foreign_politics }
        icon = GFX_focus_chi_mission_to_germany
        cost = 4
        ai_will_do = {
            factor = 10
            modifier = {
                has_country_flag = MLT_historical_run
                factor = 0
            }
        }
        bypass = {
            OR = {
                NOT = {
                    GER = {
                        has_government = fascism
                    }
                    MLT = {
                        has_government = fascism
                    }
                }
                is_in_faction_with = GER
            }
        }
        available = {
            country_exists = GER
            NOT = {
                GER = {
                    is_subject = yes
                }
            }
            is_in_faction = no
            has_government = fascism
            GER = {
                has_government = fascism
            }
        }
        search_filters = { FOCUS_FILTER_POLITICAL }
        completion_reward = {
            GER = {
                country_event = {id = malta.33 days = 1 }
            }
        }
    }

    # Seek More Useful Allies...
    focus = {
        id = MLT_seek_more_useful_allies
        x = 25
        y = 18
        prerequisite = { focus = MLT_approach_italy focus = MLT_approach_france focus = MLT_approach_germany }
        icon = GFX_focus_hol_the_foundations_of_defense
        cost = 3
        ai_will_do = {
            factor = 5
            modifier = {
                has_country_flag = MLT_historical_run
                factor = 0
            }
        }
        bypass = {

        }
        available = {
            OR = {
                is_in_faction = no
                is_faction_leader = yes
            }
        }
        search_filters = { FOCUS_FILTER_POLITICAL }
        completion_reward = {
            if = {
                limit = {
                    is_faction_leader = yes
                }
                set_faction_name = MLT_mediterranean_accord
            }
            else = {
                create_faction = MLT_mediterranean_accord
            }
        }
    }

    # Approach Luxembourg
    focus = {
        id = MLT_approach_luxembourg
        x = 22
        y = 19
        prerequisite = { focus = MLT_seek_more_useful_allies }
        icon = GFX_focus_approach_luxembourg
        cost = 4
        ai_will_do = {
            factor = 5
            modifier = {
                has_country_flag = MLT_historical_run
                factor = 0
            }
        }
        bypass = {

        }
        available = {
            country_exists = LUX
            NOT = {
                LUX = {
                    is_subject = yes
                }
            }
        }
        search_filters = { FOCUS_FILTER_POLITICAL }
        completion_reward = {
            custom_effect_tooltip = send_transmission_takes_time_lux
            hidden_effect = {
                random_list = {
                    50 = {
                        LUX = {
                            country_event = {id = malta.38 days = 7 }
                        }
                    }
                    50 = {
                        LUX = {
                            country_event = {id = malta.36 days = 7 }
                        }
                    }
                }
            }
        }
    }

    # Approach Bhutan
    focus = {
        id = MLT_approach_bhutan
        x = 25
        y = 19
        prerequisite = { focus = MLT_seek_more_useful_allies }
        icon = GFX_focus_approach_bhutan
        cost = 4
        ai_will_do = {
            factor = 5
            modifier = {
                has_country_flag = MLT_historical_run
                factor = 0
            }
        }
        bypass = {

        }
        available = {
            country_exists = BHU
            NOT = {
                BHU = {
                    is_subject = yes
                }
            }
        }
        search_filters = { FOCUS_FILTER_POLITICAL }
        completion_reward = {
            custom_effect_tooltip = send_transmission_takes_time_bhu
            hidden_effect = {
                random_list = {
                    50 = {
                        BHU = {
                            country_event = {id = malta.38 days = 7 }
                        }
                    }
                    50 = {
                        BHU = {
                            country_event = {id = malta.36 days = 7 }
                        }
                    }
                }
            }
        }
    }

    # Approach El Salvador
    focus = {
        id = MLT_approach_elsalvador
        x = 28
        y = 19
        prerequisite = { focus = MLT_seek_more_useful_allies }
        icon = GFX_focus_approach_elsalvador
        cost = 4
        ai_will_do = {
            factor = 5
            modifier = {
                has_country_flag = MLT_historical_run
                factor = 0
            }
        }
        bypass = {

        }
        available = {
            country_exists = ELS
            NOT = {
                ELS = {
                    is_subject = yes
                }
            }
        }
        search_filters = { FOCUS_FILTER_POLITICAL }
        completion_reward = {
            custom_effect_tooltip = send_transmission_takes_time_els
            hidden_effect = {
                random_list = {
                    50 = {
                        ELS = {
                            country_event = {id = malta.38 days = 7 }
                        }
                    }
                    50 = {
                        ELS = {
                            country_event = {id = malta.36 days = 7 }
                        }
                    }
                }
            }
        }
    }

    # Invest in Elevator Music...
    focus = {
        id = MLT_invest_elevator_music
        x = 15
        y = 16
        prerequisite = { focus = MLT_fiftieth_floor }
        icon = GFX_focus_invest_elevator_music
        cost = 3
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            country_event = malta.17
        }
    }

    # Or in Jetpacks
    focus = {
        id = MLT_invest_in_jetpacks
        x = 15
        y = 17
        prerequisite = { focus = MLT_invest_elevator_music }
        icon = GFX_focus_jetpack_tower_malta
        cost = 4
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            country_event = malta.18
        }
    }

    # The Hundredth Floor
    focus = {
        id = MLT_hundreth_floor
        x = 15
        y = 18
        prerequisite = { focus = MLT_invest_in_jetpacks }
        icon = GFX_focus_tower_hundreth_floor
        cost = 6
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            custom_effect_tooltip = MLT_hundreth_floor_tt
            set_variable = { max_tower_floor = 100 }
        }
    }

    # The Thousandth Floor
    focus = {
        id = MLT_thousandth_floor
        x = 15
        y = 19
        prerequisite = { focus = MLT_hundreth_floor }
        icon = GFX_focus_tower_thousandth_floor
        cost = 6
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            custom_effect_tooltip = MLT_thousandth_floor_tt
            set_variable = { max_tower_floor = 1000 }
        }
    }

    # The Leaning Tower
    focus = {
        id = MLT_leaning_tower
        x = 15
        y = 20
        prerequisite = { focus = MLT_thousandth_floor }
        icon = GFX_focus_tower_lean_malta
        cost = 5
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            country_event = malta.19
        }
    }

    # The Nine Thousand Nine Hundred and Ninety Ninth Floor
    focus = {
        id = MLT_nine_thousand_nine_hundred_ninety_ninth_floor
        x = 15
        y = 21
        prerequisite = { focus = MLT_leaning_tower }
        icon = GFX_focus_tower_9999_floor
        cost = 6
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            custom_effect_tooltip = MLT_nine_thousand_nine_hundred_ninety_ninth_floor_tt
            set_variable = { max_tower_floor = 9999 }
        }
    }

    # The Neverending Tower
    focus = {
        id = MLT_neverending_tower
        x = 15
        y = 22
        prerequisite = { focus = MLT_nine_thousand_nine_hundred_ninety_ninth_floor }
        icon = GFX_focus_tower_neverending_floor
        cost = 6
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_TOWER_MALTA }
        completion_reward = {
            custom_effect_tooltip = MLT_neverending_tower_tt
            set_variable = { max_tower_floor = 100000 }
        }
    }

    # Maltese Pride
    focus = {
        id = MLT_maltese_pride
        x = 15
        y = 23
        prerequisite = { focus = MLT_neverending_tower }
        icon = GFX_focus_maltese_pride_malta
        cost = 8
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
        }
        search_filters = { FOCUS_FILTER_ANNEXATION }
        completion_reward = {
            add_ideas = MLT_Maltese_pride
        }
    }

    # Master of the Mediterranean Sea
    focus = {
        id = MLT_master_of_mediterranean_sea
        x = 9
        y = 24
        prerequisite = { focus = MLT_maltese_pride }
        icon = GFX_focus_master_mediterranean_communism
        cost = 6
        ai_will_do = {
            factor = 10
        }
        bypass = {
    
        }
        available = {
            NOT = {
                has_capitulated = yes
            }
            has_government = communism
        }
        search_filters = { FOCUS_FILTER_ANNEXATION }
        completion_reward = {
            if = {
                limit = {
                    is_faction_leader = yes
                }
                set_faction_name = MLT_maltese_communist_faction
            }
            else = {
                create_faction = MLT_maltese_communist_faction
            }
            custom_effect_tooltip = unlock_unique_puppet_type_tower_union
            hidden_effect = {
                every_country = {
                    limit = {
                        is_subject_of = MLT
                        NOT = {
                            has_autonomy_state = autonomy_tower_union
                        }
                    }
                    hidden_effect = {
                        MLT = {
                            set_autonomy = {
                                target = PREV
                                autonomy_state = autonomy_tower_union
                            }
                        }
                    }
                    add_ideas = MLT_Share_tower
                    add_dynamic_modifier = { modifier = share_tower_of_malta_modifier }
                    set_variable = { share_weekly_manpower_tower_malta = MLT.weekly_manpower_tower_malta }
                    multiply_variable = { share_weekly_manpower_tower_malta = 0.50 }
                    set_variable = { share_refitting_speed_tower_malta = MLT.refitting_speed_tower_malta }
                    multiply_variable = { share_refitting_speed_tower_malta = 0.50 }
                    set_variable = { share_drift_defence_factor_tower_malta = MLT.drift_defence_factor_tower_malta }
                    multiply_variable = { share_drift_defence_factor_tower_malta = 0.50 }
                    set_variable = { share_trade_opinion_factor_tower_malta = MLT.trade_opinion_factor_tower_malta }
                    multiply_variable = { share_trade_opinion_factor_tower_malta = 0.50 }
                }
            }
        }
    }

    # Maltese League of Nations
    focus = {
        id = MLT_maltese_league_of_nations
        x = 13
        y = 24
        prerequisite = { focus = MLT_maltese_pride }
        icon = GFX_focus_maltese_league_nation
        cost = 6
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            NOT = {
                has_capitulated = yes
            }
            has_government = democratic
        }
        search_filters = { FOCUS_FILTER_ANNEXATION }
        completion_reward = {
            every_country = {
                limit = {
                    is_subject_of = MLT
                    NOT = {
                        has_autonomy_state = autonomy_tower_republic
                    }
                }
                hidden_effect = {
                    MLT = {
                        set_autonomy = {
                            target = PREV
                            autonomy_state = autonomy_tower_republic
                        }
                    }
                }
                add_ideas = MLT_Trade_partners
            }
            if = {
                limit = {
                    is_faction_leader = yes
                }
                set_faction_name = MLT_maltese_league_of_nations_faction
            }
            else = {
                create_faction = MLT_maltese_league_of_nations_faction
            }
            custom_effect_tooltip = unlock_unique_puppet_type_tower_republic
        }
    }

    # The Great Crusade
    focus = {
        id = MLT_the_great_crusade
        x = 17
        y = 24
        prerequisite = { focus = MLT_maltese_pride }
        icon = GFX_focus_great_crusade_neutrality
        cost = 6
         ai_will_do = {
            factor = 10
        }
        bypass = {
    
        }
        available = {
            NOT = {
                has_capitulated = yes
            }
            has_government = neutrality
        }
        search_filters = { FOCUS_FILTER_ANNEXATION }
        completion_reward = {
            custom_effect_tooltip = gains_claim_great_crusade
            hidden_effect = {
                add_state_claim = 115
                add_state_claim = 156
                add_state_claim = 117
                add_state_claim = 2
                add_state_claim = 157
                add_state_claim = 182
                add_state_claim = 187
                add_state_claim = 164
                add_state_claim = 183
                add_state_claim = 452
                add_state_claim = 447
                add_state_claim = 446
                add_state_claim = 453
                add_state_claim = 454
                add_state_claim = 455
                add_state_claim = 554
                add_state_claim = 553
                add_state_claim = 680
                add_state_claim = 677
                add_state_claim = 799
                add_state_claim = 350
                add_state_claim = 344
                add_state_claim = 345
                add_state_claim = 797
                add_state_claim = 341
                add_state_claim = 552
                add_state_claim = 456
                add_state_claim = 457
                add_state_claim = 451
                add_state_claim = 663
                add_state_claim = 450
                add_state_claim = 662
                add_state_claim = 449
                add_state_claim = 448
                add_state_claim = 661
                add_state_claim = 273
                add_state_claim = 114
                add_state_claim = 1
                add_state_claim = 117
                add_state_claim = 665
                add_state_claim = 458
                add_state_claim = 460
                add_state_claim = 513
                add_state_claim = 459
                add_state_claim = 514
                add_state_claim = 462
                add_state_claim = 551
                add_state_claim = 767
                add_state_claim = 775
                add_state_claim = 515
                add_state_claim = 782
                add_state_claim = 786
                add_state_claim = 177
            }
        }
    }

    # Master of the Shores
    focus = {
        id = MLT_master_of_shores
        x = 21
        y = 24
        prerequisite = { focus = MLT_maltese_pride }
        icon = GFX_focus_master_of_the_shores
        cost = 6
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            NOT = {
                has_capitulated = yes
            }
            has_government = fascism
        }
        search_filters = { FOCUS_FILTER_ANNEXATION }
        completion_reward = {
            custom_effect_tooltip = gains_claim_state_shore
            hidden_effect = {
                add_state_claim = 341
                add_state_claim = 797
                add_state_claim = 347
                add_state_claim = 340
                add_state_claim = 339
                add_state_claim = 187
                add_state_claim = 342
                add_state_claim = 164
                add_state_claim = 345
                add_state_claim = 183
                add_state_claim = 344
                add_state_claim = 799
                add_state_claim = 677
                add_state_claim = 553
                add_state_claim = 454
                add_state_claim = 453
                add_state_claim = 446
                add_state_claim = 447
                add_state_claim = 452
                add_state_claim = 451
                add_state_claim = 450
                add_state_claim = 449
                add_state_claim = 448
                add_state_claim = 665
                add_state_claim = 458
                add_state_claim = 460
                add_state_claim = 459
                add_state_claim = 461
                add_state_claim = 290
                add_state_claim = 118
                add_state_claim = 173
                add_state_claim = 168
                add_state_claim = 167
                add_state_claim = 165
                add_state_claim = 177
                add_state_claim = 31
                add_state_claim = 22
                add_state_claim = 21
                add_state_claim = 735
                add_state_claim = 158
                add_state_claim = 162
                add_state_claim = 2
                add_state_claim = 117
                add_state_claim = 156
                add_state_claim = 115
                add_state_claim = 114
                add_state_claim = 1
                add_state_claim = 157
                add_state_claim = 161
                add_state_claim = 160
                add_state_claim = 736
                add_state_claim = 103
                add_state_claim = 163
                add_state_claim = 105
                add_state_claim = 44
                add_state_claim = 805
                add_state_claim = 185
                add_state_claim = 186
                add_state_claim = 182
                add_state_claim = 47
                add_state_claim = 731
                add_state_claim = 184
            }
        }
    }

    # Protectors of All Seas
    focus = {
        id = MLT_protectors_of_all_seas
        x = 11
        y = 25
        prerequisite = { focus = MLT_master_of_mediterranean_sea focus = MLT_maltese_league_of_nations }
        icon = GFX_focus_protector_all_sea
        cost = 8
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
            NOT = {
                has_capitulated = yes
            }
        }
        search_filters = { FOCUS_FILTER_ANNEXATION }
        completion_reward = {
            custom_effect_tooltip = unlock_decision_faction_expansion
        }
    }

    # Greater Malta
    focus = {
        id = MLT_greater_malta
        x = 19
        y = 25
        prerequisite = { focus = MLT_the_great_crusade focus = MLT_master_of_shores }
        icon = GFX_focus_greater_malta_empire
        cost = 8
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
            NOT = {
                has_capitulated = yes
            }
        }
        search_filters = { FOCUS_FILTER_ANNEXATION }
        completion_reward = {
            custom_effect_tooltip = unlocks_decision_core_claim
            custom_effect_tooltip = small_debuff_national_spirit_claims
            every_country = {
                limit = {
                    NOT = {
                        TAG = MLT
                        is_in_faction_with = MLT
                        is_subject_of = MLT
                    }
                    OR = {
                        any_owned_state = {
                            is_claimed_by = MLT
                        }
                        any_controlled_state = {
                            is_claimed_by = MLT
                        }
                    }
                }
                country_event = { id = malta.20 }
            }
        }
    }

    # A Bright Future
    focus = {
        id = MLT_bright_future
        x = 15
        y = 26
        prerequisite = { focus = MLT_protectors_of_all_seas focus = MLT_greater_malta }
        icon = GFX_focus_bright_future_malta
        cost = 10
        ai_will_do = {
            factor = 10
        }
        bypass = {

        }
        available = {
            has_full_control_of_state = 116
            is_major = yes
            NOT = {
                has_capitulated = yes
            }
            if = {
                limit = {
                    OR = {
                        has_government = fascism
                        has_government = neutrality 
                    }
                }
                has_country_flag = has_formed_empire_MLT
            }
            if = {
                limit = {
                    OR = {
                        has_government = democratic
                        has_government = communism
                    }
                }
                is_faction_leader = yes
                num_faction_members > 9
                custom_trigger_tooltip = {
                    tooltip = MLT_bright_future_tt
                    any_of_scopes = {
                        array = ROOT.faction_members
                        
                        is_major = yes
                        NOT = {
                            original_tag = MLT
                        }
                    }
                }
            }
        }
        search_filters = { FOCUS_FILTER_ANNEXATION }
        completion_reward = {
            add_ideas = MLT_Bright_future_idea
            unlock_decision_tooltip = MLT_proclaim_leader_tower
            if = {
                limit = {
                    has_government = fascism
                }
                hidden_effect = {
                    news_event = { id = newsmalta.4 days = 1 }
                }
            }
            else_if = {
                limit = {
                    has_government = neutrality
                }
                hidden_effect = {
                    news_event = { id = newsmalta.5 days = 1 }
                }
            }
            else_if = {
                limit = {
                    has_government = communism
                }
                hidden_effect = {
                    news_event = { id = newsmalta.6 days = 1 }
                }
            }
            else_if = {
                limit = {
                    has_government = democratic
                }
                hidden_effect = {
                    news_event = { id = newsmalta.7 days = 1 }
                }
            }
        }
    }
}